<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Copyright (c) Codice Foundation
 *
 * This is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either
 * version 3 of the License, or any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details. A copy of the GNU Lesser General Public License is distributed along with this program and can be found at
 * <http://www.gnu.org/licenses/lgpl.html>.
 *
 **/
 -->
<features name="${project.artifactId}-${project.version}"
          xmlns="http://karaf.apache.org/xmlns/features/v1.3.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.3.0 http://karaf.apache.org/xmlns/features/v1.3.0">

    <feature name="security-core-api" install="manual" version="${project.version}" description="Required dependencies for admin-beta-graphql">
        <feature>security-core-api-deps</feature>
        <bundle>mvn:ddf.security.core/security-core-api/${ddf.version}</bundle>
    </feature>

    <feature name="security-core-api-deps" install="manual" version="${project.version}" description="Required dependencies for admin-beta-graphql">

        <!--begin opensaml deps-->
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.opensaml/3.1.1_3</bundle>
        <bundle>mvn:com.google.guava/guava/18.0</bundle>
        <bundle>mvn:commons-codec/commons-codec/1.10</bundle>
        <bundle>mvn:org.apache.santuario/xmlsec/2.0.3</bundle>
        <bundle>mvn:joda-time/joda-time/2.9.4</bundle>
        <!--end opensaml deps-->

        <bundle>mvn:javax.validation/validation-api/1.1.0.Final</bundle>
        <bundle>mvn:javax.ws.rs/javax.ws.rs-api/2.0.1</bundle>

        <bundle>mvn:org.apache.cxf/cxf-core/3.1.7</bundle>
        <bundle>mvn:org.apache.ws.xmlschema/xmlschema-core/2.2.1</bundle>

        <bundle>mvn:org.apache.cxf/cxf-rt-bindings-soap/3.1.7</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.wsdl4j/1.6.3_1</bundle>
        <bundle>mvn:org.apache.cxf/cxf-rt-wsdl/3.1.7</bundle>

        <bundle>mvn:org.apache.cxf/cxf-rt-ws-policy/3.1.7</bundle>
        <bundle>mvn:org.apache.neethi/neethi/3.0.3</bundle>

        <bundle>mvn:org.apache.cxf/cxf-rt-ws-security/3.1.7</bundle>
        <bundle>mvn:org.apache.cxf/cxf-rt-security/3.1.7</bundle>
        <bundle>mvn:org.apache.cxf/cxf-rt-security-saml/3.1.7</bundle>
        <bundle>mvn:org.apache.wss4j/wss4j-ws-security-common/2.1.7</bundle>
        <bundle>mvn:javax.mail/mail/1.4.4</bundle>
        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.jasypt/1.9.0_1</bundle>
        <bundle>mvn:org.apache.wss4j/wss4j-ws-security-dom/2.1.7</bundle>
        <bundle>mvn:org.apache.cxf/cxf-rt-ws-addr/3.1.7</bundle>
        <bundle>mvn:org.apache.cxf/cxf-rt-databinding-jaxb/3.1.7</bundle>
        <bundle>mvn:org.apache.wss4j/wss4j-bindings/2.1.7</bundle>
        <bundle>mvn:org.apache.wss4j/wss4j-policy/2.1.7</bundle>
        <bundle>mvn:org.apache.wss4j/wss4j-ws-security-policy-stax/2.1.7</bundle>
        <bundle>mvn:org.apache.wss4j/wss4j-ws-security-stax/2.1.7</bundle>

        <bundle>mvn:org.apache.shiro/shiro-core/1.3.2</bundle>

        <bundle>mvn:org.bouncycastle/bcprov-jdk15on/1.55</bundle>

        <bundle>mvn:org.codehaus.woodstox/stax2-api/3.1.4</bundle>

        <bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.spring-core/4.3.7.RELEASE_1</bundle>

        <bundle>mvn:javax.servlet/javax.servlet-api/3.1.0</bundle>

        <bundle>mvn:commons-io/commons-io/2.5</bundle>

        <bundle>mvn:commons-lang/commons-lang/2.6</bundle>

        <feature>aries-blueprint</feature>
    </feature>

    <feature name="configurator" install="manual" version="${project.version}"
             description="Basic Authentication Handler for web applications.">
        <feature>configurator-deps</feature>
        <bundle>mvn:ddf.admin/admin-configurator-impl/${ddf.version}</bundle>
    </feature>

    <feature name="configurator-deps" install="manual" version="${project.version}"
             description="Basic Authentication Handler for web applications.">
        <bundle>mvn:commons-collections/commons-collections/3.2.2</bundle>
        <bundle>mvn:ddf.admin/admin-configurator-api/${ddf.version}</bundle>
        <bundle>mvn:ddf.admin.core/admin-core-api/${ddf.version}</bundle>
        <bundle>mvn:ddf.admin/admin-configurator-actions-api/${ddf.version}</bundle>
    </feature>

    <feature name="mock-configurator" install="manual" version="${project.version}"
             description="Mock configurator implementation for itests.">
        <bundle>mvn:org.codice.ddf.admin.beta/mocks/${project.version}</bundle>
    </feature>

    <feature name="security-handler-api" install="manual" version="${project.version}"
             description="Basic Authentication Handler for web applications.">
        <bundle>mvn:ddf.security.handler/security-handler-api/${ddf.version}</bundle>
    </feature>

    <feature name="security-policy-context" install="manual" version="${project.version}"
             description="Web Context policy manager">
        <bundle>mvn:ddf.security.policy/security-policy-api/${ddf.version}</bundle>
        <bundle>mvn:ddf.security.policy/security-policy-context/${ddf.version}</bundle>
    </feature>

    <feature name="test-dependencies" install="manual" version="${project.version}"
             description="Web Context policy manager">
        <bundle>mvn:org.apache.httpcomponents/httpcore-osgi/4.4.5</bundle>
        <bundle>mvn:org.apache.httpcomponents/httpclient-osgi/4.5.2</bundle>
        <bundle>
            mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.hamcrest/1.3_1
        </bundle>
        <bundle>mvn:ddf.test.thirdparty/rest-assured/${ddf.version}</bundle>
        <bundle>mvn:ddf.test.itests/test-itests-common/${ddf.version}</bundle>
    </feature>
</features>
