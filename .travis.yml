sudo: false
language: java
install: true

addons:
  sonarqube:
    organization: "connexta-test"
    token:
      secure: "DZ9RmFt2HnjXz0wlxHlzeu6zSv4YTXRq78wx46S1J4BK3jkZIU9OeD+19VvFgwLYC5nqFXvMIt3fIdSH5hYiRpZPjsOrnDd82V4TsbJMf49b7NtOViNCVoOz3Fwxj/ykk+ISJSKOtSlyMsUmvirD1WmudVHFsQLYMXoRTr8NFTuVKjVtXf/puqPBWjq9NLFvF0U/PHgXX/t/0dbEraRnWKXH5nLo6SzCbraFIgCSzbixvpW36YZBKQ0amauBHrZZRAVnJO0fQIQd8sVEAHWf96wjF8bttTFNPiTzHo9HkIs88YRFticRi1uJlgzVm9W4s4EpvweYdq/FZ9/ezRk9sSTD/5sHTOZ0mc8Y63jbplTs6P6unbBC3Hd2ftCxJGethlP/bEgWOh56Y5q0/43DbOV7NSdnymGck/b2tiZmtCCkXT/75Kr8zq8KHJj6SC0kgJgQFS03nlFuEYJ7Fn75DoZu6Tqch9AYZXG4ZyZb3LbAusQXoUJ/gGdwpLBxxXGhhFuHxuC0NGf4pzMIE5FgPrv+D0sKVW1hZdZv1LBACXwSf4bl3niuUpQrWb36Gejg+YS/zrpSuJ0kUodDhpAhbh9zJmEPx4W72IdXr+0eTX8YHVYyLKYEodJ538f8hJ7y8MptS5DHE+xJKOPStlPcZSuIoNHKJrFZGboFQyKfKYc="

jdk:
  - oraclejdk8

cache:
  yarn: true
  directories:
    - '$HOME/.sonar/cache'

script: ./travis.sh

env:
  global:
    - CODICE_USERNAME=ddf
    # Nexus credentials
    - secure: "kFHe2uFDq7toVyjZFxypZ5r9OZvaYWXEm2qPULkVms1DgSQqBncEKuSy9Y0Ab9UXlLkG0b9uUq8EEbXXcYX+OEnWIqOKleh+q/p912P/Xhmx2WFvs++743xzNa7gpBH5apZLlvLZst+UKfggvdMUqDSoSTZic1Pm+/RtMRbybMgnrdMvxXPaDqmjXGkKCoYE2OaUxQd+MtSUzgX76cXkCIADTrZKnGEKrfSzm52W0Lr90CQChJc9HOLtOiZYjYByLMRPLOZMEbG/fGjz2CSLP3BqCXuGwCW/4QcIaSk+DFxPu33HzKjYTztQYtGYksl1aY4WKlWw/BYfmZ4tzWIuyCSOVJcrxHZiXO3qj2fJDmK9QL/5yKVT+a7ly3ObiAdjtM5PF8h1qRP9Y++gLTUdBca5jaBvgqXTfdRvtwOo7vnD/VxDLy7+cd7f8qOo3fAacSedeQfYn5g0F0xaMB2tb2izdSBA1nb/nFGYdYffHIobmJplVwshi5GiGo8t1bYhel+HfT1SS8DyhAZXa5473UAQ8Lu/SErCqKsuFJMfiUa6TuS6Su3E2jJB3sjPYQP1Dhvp/vKCcY7z+Z0d6BoSQFYbkAgDNSqeZC/hjnzk+Di3Q1Q9KAT9x8RCH7cwmuDnLxGIzFnK3ECJIzz/ofoaPokrV9AYcPXa0HEuAr9vr7M="

    # Github token for SonarQube plugin ($GITHUB_TOKEN)
    - secure: "Ro0jX0Kdu1PztA04BlKjBUZ6d3c4d4FYgxIJh9WtHZGAysjxsx8O8t3m5PC4mmed6GEmw6g+Mom4kcGsKMo/BLeBFcUE466TA9ZpS6bz3/+5mtuLzL7KGHjxzSq2y8E3QXySEnOLdLL7RxZxLj53gpVfulJ20njsGwNpTq8dIETL7yh4/ZD/xNzVVfDBwiQxDA12Q04S7zlgOgK/MgEc5kit8DPyDPFzdeCLjyCRUZqsd7bJ4bqwlc2U0aKXBv+MWhsgNjBNlF3pwj1801NKR2xKgOzSR+5GAd7o5zn4LBmmIgFiRpiiV19H8n2GPYRkJLOn18O6x8yzR/In7Oi498jUhtVKawdjdqrVja5n6Ba41Z2GVLKsyl/27nNOpmUR9X8Jzwrz33X3mayqzLREjWF+ITsjYK9D6lUw165OEbUf9N3FajgPF5/1SpUeuNTuiJoEk4h9oqqGXlDzu4uCW5QURmsYcMDnna/EAv0qjBNtY3CR7eLecW6pYjQ9h/J1YlZhYWYykYgaDnlRzJy1rVilyakMzNTnBUfDHOQ7I1aFEY6NmB2WOsOTRqxE65ppFfbw6wGqXIAzAGTgQrH4jhGwbC9k7XFPp0zys5usFLDHuD70m1kI7LB9NUXQG57PWuYpRlk+E34rNz8UL0u9OxOgdM6twtSLz39yYDc90Gs="
    # SonarQube token for SonarQube plugin ($SONARQ_TOKEN)
    - secure: "P6u1ezHxTChS7Vut+51tp6V0Xg2YePTCuMKdAtxYVP5js8FVANbTJa2ETF0MhNni/8QFmXuzLGARnTNQ9Cg+5UshF3mo99q8hjA9rH66ZwCab7JGqK0IE141Uuc7TGl0iFQ/PLrmnVV+szq3TCU6l63Ho7cBIG0Z/rlYtcG81btPdLevZtkPaFcEN1Yc0p0EiWfQGW/z+pO3koP8nr+1OI77vO104A1vZb1n1c6+RuhTYDgT8n2IgyNHrmjaT14frA+MCCVCE9j9snTuwv0s5aQTec7lsUejQ8PGLPoKOHuzDWTCA11R71N6EmZiV9PNl65Ed61sj3uKdUfG9n4NPJiXasMExZXLU3fgPl/A3xOJ07yxTeYdBAQpwgg9GNGcOty7Gr5+ctkxbpgC9jyFNlOHja6J6foO9sxZ/ajXruJDh9dAmSrwjFLf3OJn1aTKe5qqrEEg2f/R1FpBT5AhAeyfY/L5LEBi6dkE8jVybdmHMn2MIerdst8GXACstraBxySNd3qb/oqsmSV7dN80/GbUhbYfaB2YAxMSie9qF+o2cWLTHx2AaGvFCkdg016dqjLgRRCbPX6vOcb/V+quW+YDL9D3ipYKINabIi7kspWrX+C3AI02d6qFxADsbTur3EOyjU/GyxfVT3vu1JADOUIRwz1azqR0zE6KPShNhxk="

after_success:
  - ./snapshot-deploy.sh
